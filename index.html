<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Casa Del Boubou</title>
    <style>
        :root {
            --beige: #f5e6d3;
            --marron: #8b6f47;
            --marron-fonce: #6b5839;
            --blanc: #ffffff;
            --gris-clair: #f0f0f0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--beige) 0%, var(--gris-clair) 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: var(--blanc);
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: var(--marron-fonce);
            font-size: 3em;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .header p {
            color: var(--marron);
            font-size: 1.1em;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .puppies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .puppy-card {
            background: var(--blanc);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 12px rgba(139, 111, 71, 0.15);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .puppy-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(139, 111, 71, 0.25);
        }

        .card-header {
            background: linear-gradient(135deg, var(--marron) 0%, var(--marron-fonce) 100%);
            padding: 20px;
            text-align: center;
            color: var(--blanc);
            cursor: pointer;
            user-select: none;
            position: relative;
        }

        .card-header:hover {
            opacity: 0.9;
        }

        .paw-svg {
            width: 50px;
            height: 50px;
            margin-bottom: 10px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        .puppy-name {
            font-size: 2em;
            font-weight: bold;
            color: var(--blanc);
        }

        .card-body {
            padding: 20px;
            display: none;
        }

        .card-body.active {
            display: block;
        }

        .media-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
            min-height: 150px;
        }

        .media-item {
            position: relative;
            background: var(--beige);
            border: 2px dashed var(--marron);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            aspect-ratio: 1;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.5em;
        }

        .media-item:hover {
            background: rgba(139, 111, 71, 0.1);
            border-color: var(--marron-fonce);
        }

        .media-item img,
        .media-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .media-item.has-content {
            border: none;
            background: transparent;
            position: relative;
        }

        .media-item.has-content:hover::after {
            content: '‚úï';
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 50, 50, 0.9);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            z-index: 10;
        }

        .add-button {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--marron);
            color: var(--blanc);
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 15px;
        }

        .add-button:hover {
            background: var(--marron-fonce);
        }

        .hidden-input {
            display: none;
        }

        .no-media-text {
            color: var(--marron);
            text-align: center;
            padding: 20px;
            font-size: 1.1em;
        }

        @keyframes glowPulse {
            0%, 100% {
                box-shadow: 0 0 10px rgba(139, 111, 71, 0.4), inset 0 0 10px rgba(139, 111, 71, 0.1);
            }
            50% {
                box-shadow: 0 0 25px rgba(139, 111, 71, 0.8), inset 0 0 15px rgba(139, 111, 71, 0.2);
            }
        }

        .gift-button {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 50px;
            height: 50px;
            background: var(--beige);
            border: 2px solid var(--marron);
            border-radius: 8px;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: glowPulse 2s ease-in-out infinite;
        }

        .gift-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(139, 111, 71, 1), inset 0 0 15px rgba(139, 111, 71, 0.3);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            position: relative;
            width: 90%;
            max-width: 800px;
            background: var(--blanc);
            border-radius: 12px;
            overflow: hidden;
        }

        .modal-video {
            width: 100%;
            height: auto;
            display: block;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 50, 50, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 24px;
            cursor: pointer;
            z-index: 1001;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-modal:hover {
            background: rgba(255, 50, 50, 1);
        }

        .share-button {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--beige);
            color: var(--marron-fonce);
            border: 2px solid var(--marron);
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 30px;
        }

        .share-button:hover {
            background: var(--marron);
            color: var(--blanc);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .puppies-grid {
                grid-template-columns: 1fr;
            }

            .media-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üêæ La Casa Del Boubou üêæ</h1>
            <p>Album interactif de nos adorables chiots</p>
        </div>

        <div class="puppies-grid" id="puppiesGrid"></div>

        <button class="share-button" onclick="shareAlbum()">üì§ Partager l'album</button>
    </div>

    <div class="modal" id="giftModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeGiftModal()">‚úï</button>
            <iframe id="giftIframe" style="width: 100%; height: 600px; border: none;" allow="autoplay"></iframe>
        </div>
    </div>

    <script>
      <script>
    const puppies = ['Rocky', 'Arley', 'Avenger', 'Atica', 'After', 'Joy'];

    const pawSVG = `<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="paw-svg">
        <circle cx="50" cy="70" r="18" fill="#8b6f47"/>
        <circle cx="25" cy="30" r="12" fill="#8b6f47"/>
        <circle cx="50" cy="15" r="12" fill="#8b6f47"/>
        <circle cx="75" cy="30" r="12" fill="#8b6f47"/>
    </svg>`;

    const albumData = {};
    puppies.forEach(name => {
        albumData[name] = [];
    });

    // üîπ Charge l‚Äôalbum sauvegard√© au d√©marrage
    function loadAlbum() {
        try {
            const saved = localStorage.getItem('casaDelBoubouAlbum');
            if (!saved) return;
            const parsed = JSON.parse(saved);

            puppies.forEach(name => {
                if (Array.isArray(parsed[name])) {
                    albumData[name] = parsed[name];
                }
            });
        } catch (e) {
            console.error('Erreur de chargement de l‚Äôalbum', e);
        }
    }

    // üîπ Sauvegarde l‚Äôalbum apr√®s chaque modification
    function saveAlbum() {
        try {
            const dataToSave = JSON.stringify(albumData);
            localStorage.setItem('casaDelBoubouAlbum', dataToSave);
        } catch (e) {
            console.error('Erreur de sauvegarde de l‚Äôalbum', e);
        }
    }

    const giftVideos = {
        'Rocky': 'https://drive.google.com/file/d/1l2XwmhkJuIRoDKgfnqhs83l8Jnz-SMVZ/preview',
        'Arley': 'https://drive.google.com/file/d/1ZHFFylZ5aSvd3UufQIX0dhDUe1wI8VkA/preview',
        'Avenger': 'https://drive.google.com/file/d/1SL0siEywn8p3AZdE0Ajig2mQe1gprhat/preview',
        'Atica': 'https://drive.google.com/file/d/1ESWxsl7mbgL1W5ytoIXCTaFVzsDpu6be/preview',
        'After': 'https://drive.google.com/file/d/1cbc6HmYP5xkp4Qtc_W4SwTMb3UbDPVsP/preview',
        'Joy': 'https://drive.google.com/file/d/1u1SsrdyqgQBOl-zlkibsk3JPFUrkiUKn/preview'
    };

    function createPuppiesGrid() {
        const grid = document.getElementById('puppiesGrid');
        grid.innerHTML = '';

        puppies.forEach(puppyName => {
            const card = document.createElement('div');
            card.className = 'puppy-card';

            const header = document.createElement('div');
            header.className = 'card-header';
            header.innerHTML = `${pawSVG}<div class="puppy-name">${puppyName}</div>`;

            const body = document.createElement('div');
            body.className = 'card-body';

            header.addEventListener('click', function() {
                document.querySelectorAll('.card-body.active').forEach(el => {
                    if (el !== body) el.classList.remove('active');
                });
                body.classList.toggle('active');
            });

            const mediaContainer = document.createElement('div');
            mediaContainer.className = 'media-container';
            mediaContainer.id = `media-container-${puppyName}`;

            if (albumData[puppyName].length === 0) {
                const noMedia = document.createElement('div');
                noMedia.className = 'no-media-text';
                noMedia.textContent = 'Aucune photo ou vid√©o pour le moment';
                noMedia.id = `no-media-${puppyName}`;
                mediaContainer.appendChild(noMedia);
            } else {
                albumData[puppyName].forEach((media, idx) => {
                    addMediaToDisplay(mediaContainer, puppyName, idx, media);
                });
            }

            body.appendChild(mediaContainer);

            const addBtn = document.createElement('button');
            addBtn.className = 'add-button';
            addBtn.textContent = '‚ûï Ajouter une photo ou vid√©o';
            addBtn.addEventListener('click', function() {
                document.getElementById(`file-input-${puppyName}`).click();
            });
            body.appendChild(addBtn);

            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.id = `file-input-${puppyName}`;
            fileInput.className = 'hidden-input';
            fileInput.accept = 'image/*,video/*';
            fileInput.addEventListener('change', (e) => handleFileUpload(e, puppyName));
            body.appendChild(fileInput);

            const giftBtn = document.createElement('button');
            giftBtn.className = 'gift-button';
            giftBtn.textContent = 'üéÅ';
            giftBtn.title = 'Vid√©o surprise!';
            giftBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                openGiftModal(puppyName);
            });
            header.appendChild(giftBtn);

            card.appendChild(header);
            card.appendChild(body);
            grid.appendChild(card);
        });
    }

    function addMediaToDisplay(container, puppyName, index, media) {
        const mediaItem = document.createElement('div');
        mediaItem.className = 'media-item has-content';
        mediaItem.id = `media-${puppyName}-${index}`;

        if (media.type === 'image') {
            const img = document.createElement('img');
            img.src = media.url;
            img.alt = 'Photo';
            mediaItem.appendChild(img);
        } else {
            const video = document.createElement('video');
            video.src = media.url;
            video.style.width = '100%';
            video.style.height = '100%';
            mediaItem.appendChild(video);
        }

        mediaItem.addEventListener('mouseenter', function() {
            this.style.opacity = '0.8';
        });

        mediaItem.addEventListener('mouseleave', function() {
            this.style.opacity = '1';
        });

        container.appendChild(mediaItem);
    }

    function handleFileUpload(event, puppyName) {
        const file = event.target.files[0];
        if (!file) return;

        if (!file.type.startsWith('image/') && !file.type.startsWith('video/')) {
            alert('Veuillez s√©lectionner une image ou une vid√©o');
            return;
        }

        const reader = new FileReader();
        reader.onload = (e) => {
            const mediaType = file.type.startsWith('image') ? 'image' : 'video';
            const media = { type: mediaType, url: e.target.result };

            const noMediaText = document.getElementById(`no-media-${puppyName}`);
            if (noMediaText) noMediaText.remove();

            albumData[puppyName].push(media);
            const container = document.getElementById(`media-container-${puppyName}`);
            addMediaToDisplay(container, puppyName, albumData[puppyName].length - 1, media);

            // üîπ Sauvegarde apr√®s ajout
            saveAlbum();
        };

        reader.onerror = () => {
            alert('Erreur lors de la lecture du fichier');
        };

        reader.readAsDataURL(file);
        event.target.value = '';
    }

    function deleteMedia(puppyName, index) {
        const mediaItem = document.getElementById(`media-${puppyName}-${index}`);
        if (mediaItem) mediaItem.remove();

        albumData[puppyName].splice(index, 1);

        const container = document.getElementById(`media-container-${puppyName}`);
        const items = container.querySelectorAll('.media-item');
        items.forEach((item, idx) => {
            item.id = `media-${puppyName}-${idx}`;
        });

        if (albumData[puppyName].length === 0) {
            const noMedia = document.createElement('div');
            noMedia.className = 'no-media-text';
            noMedia.textContent = 'Aucune photo ou vid√©o pour le moment';
            noMedia.id = `no-media-${puppyName}`;
            container.appendChild(noMedia);
        }

        // üîπ Sauvegarde apr√®s suppression
        saveAlbum();
    }

    function shareAlbum() {
        const pageUrl = window.location.href;
        const shareText = `üêæ D√©couvrez La Casa Del Boubou - Album de nos adorables chiots!\n${pageUrl}`;

        if (navigator.share) {
            navigator.share({
                title: 'La Casa Del Boubou',
                text: shareText,
                url: pageUrl
            }).catch(err => console.log('Partage annul√©'));
        } else if (navigator.clipboard) {
            navigator.clipboard.writeText(shareText).then(() => {
                alert('‚úÖ Lien copi√©!\n\nVous pouvez le partager avec vos amis et famille.');
            }).catch(() => {
                alert('Lien √† partager:\n' + pageUrl);
            });
        } else {
            alert('Lien √† partager:\n' + pageUrl);
        }
    }

    document.addEventListener('click', function(e) {
        if (e.target.textContent === '‚úï') {
            const mediaItem = e.target.closest('.media-item');
            if (mediaItem) {
                const id = mediaItem.id;
                const match = id.match(/media-(.+)-(\d+)/);
                if (match) {
                    deleteMedia(match[1], parseInt(match[2]));
                }
            }
        }
    });

    function openGiftModal(puppyName) {
        const modal = document.getElementById('giftModal');
        const giftIframe = document.getElementById('giftIframe');

        if (giftVideos[puppyName]) {
            giftIframe.src = giftVideos[puppyName];
            modal.classList.add('active');
        } else {
            alert('üìπ Vid√©o surprise √† venir pour ' + puppyName + '!');
        }
    }

    function closeGiftModal() {
        const modal = document.getElementById('giftModal');
        const giftIframe = document.getElementById('giftIframe');
        modal.classList.remove('active');
        giftIframe.src = '';
    }

    document.addEventListener('click', function(e) {
        const modal = document.getElementById('giftModal');
        if (e.target === modal) {
            closeGiftModal();
        }
    });

    // üîπ Charge l‚Äôalbum puis construit la grille
    loadAlbum();
    createPuppiesGrid();
</script>

    </script>
</body>
</html>
